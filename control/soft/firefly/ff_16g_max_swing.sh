#!/bin/bash
# program max output swing into 16G FFs
# registers in expansion register for each FF
reg=(0x50 0x40 0x50 0x50 0x50 0x50 0x50 0x48 0x48 0x48 0x48)

# values of registers for each FF
val=(0x7f 0xf7 0xef 0xf7 0xfb 0xfd 0xfe 0x7f 0xf7 0xfd 0xdf)

for i in 0 1 2 3 4 5 6 7 8 9 10
do
	i2cset -y 1 0x45 ${reg[$i]} ${val[$i]} # select one FF

	i2cset -y 1 0x71 2 # switch to FF branch

	i2cset -y 1 0x50 127 3 # page 3
	i2cset -y 1 0x50 238 0x33 # max swing
	i2cset -y 1 0x50 239 0x33 # max swing
	i2cset -y 1 0x50 127 0 # page 0


	i2cset -y 1 0x71 1 # switch to exp reg branch

	i2cset -y 1 0x45 ${reg[$i]} 0xff # unselect all FFs

done;
